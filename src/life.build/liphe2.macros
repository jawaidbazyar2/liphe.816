 MACRO&lab _GetNextEvent&lab ldx #$0A06 jsl $E10000 MEND MACRO&lab _GetTick&lab ldx #$2503 jsl $E10000 MEND MACRO&lab _CREATE &params&lab jsl $E100A8 dc i2"1" dc i4"&params" MEND MACRO&lab _SET_FILE_INFO &params&lab jsl $E100A8 dc i2"5" dc i4"&params" MEND MACRO&lab _OPEN &params&lab jsl $E100A8 dc i2"$10" dc i4"&params" MEND MACRO&lab _WRITE &params&lab jsl $E100A8 dc i2"$13" dc i4"&params" MEND MACRO&lab _CLOSE &params&lab jsl $E100A8 dc i2"$14" dc i4"&params" MEND MACRO&lab _SetPort&lab ldx #$1B04 jsl $E10000 MEND MACRO&lab _MoveTo&lab ldx #$3A04 jsl $E10000 MEND MACRO&lab _Random&lab ldx #$8604 jsl $E10000 MEND MACRO&lab _SetRandSeed&lab ldx #$8704 jsl $E10000 MEND MACRO&lab _HideCursor&lab ldx #$9004 jsl $E10000 MEND MACRO&lab _ShowCursor&lab ldx #$9104 jsl $E10000 MEND MACRO&lab _DrawCString&lab ldx #$A604 jsl $E10000 MEND MACRO&lab _SFPutFile&lab ldx #$0A17 jsl $E10000 MEND MACRO&lab pushlong &addr,&offset&lab ANOP LCLC &C LCLC &REST&C AMID &addr,1,1 AIF "&C"="#",.immediate AIF "&C"="[",.zeropage AIF C:&offset=0,.nooffset AIF "&offset"="s",.stack pushword &addr+2,&offset pushword &addr,&offset MEXIT.nooffset pushword &addr+2 pushword &addr MEXIT.immediate&REST AMID &addr,2,L:&addr-1 dc I1'$F4',I2'(&REST)|-16' dc I1'$F4',I2'&REST' MEXIT.stack pushword &addr+2,s pushword &addr+2,s MEXIT.zeropage ldy #&offset+2 pushword &addr,y ldy #&offset pushword &addr,y MEND MACRO&lab pushword &SYSOPR&lab ANOP AIF c:&SYSOPR=0,.b LCLC &C&C AMID "&SYSOPR",1,1 AIF ("&C"="#").AND.(S:LONGA),.immediate lda &SYSOPR pha MEXIT.b pha MEXIT.immediate LCLC &REST LCLA &BL&BL ASEARCH "&SYSOPR"," ",1 AIF &BL>0,.a&BL SETA L:&SYSOPR+1.a&REST AMID "&SYSOPR",2,&BL-2 dc I1'$F4',I2'&REST' MEND MACRO&lab str &string&lab dc i1'l:&string',c'&string' MEND MACRO&lab _SelectWindow&lab ldx #$110E jsl $E10000 MEND MACRO&lab _HideWindow&lab ldx #$120E jsl $E10000 MEND MACRO&lab _ShowWindow&lab ldx #$130E jsl $E10000 MEND MACRO&lab _DESTROY &params&lab jsl $E100A8 dc i2"2" dc i4"&params" MEND MACRO&lab _READ &params&lab jsl $E100A8 dc i2"$12" dc i4"&params" MEND MACRO&lab _SFGetFile&lab ldx #$0917 jsl $E10000 MEND