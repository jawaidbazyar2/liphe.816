***   This code does some obvious stuff.***   It allows the user to input initial conditions for the universe.***   It does NOT allow saving or restoration of screens. This is just***   a quick'n'dirty version to totally test my routines so I don't***   drop buggy code in a desktop environment.***   A note to aspiring assembly programmers: When text of any form or***   flags are involved, it makes the coding magnitudes easier if you***   have the ACC/MEM processor status flag set to the 8-bit mode.***   Not only does this save code, (you don't have to mask out the upper***   8 bits all the time).  If you have a need to do some numerics or***   stack manipulation, switch into 16-bit ACC/MEM mode temporarily.***   Another thing is that it is easy to write modular code with this***   assembler, and you therefore should.CH             gequ $00VC             gequ $02BASL           gequ $04   ; this var is 3-4 bytes long.BASH           gequ $05KEYBOARD       GEQU $E0C000KEYSTROBE      GEQU $E0C010               msb offlifedrive      START               using Junk               using Buffers               phk               plb             ;make the data bank the same as the program bank               LONGA OFF               sep #$20               lda #1               sta StatBuf+450               sta StatBuf+451               sta StatBuf+452               lda #3               sta Population               jsr FixScreen               jsr LifeEdit               LONGA ON               rep #$20        ; re-set to 16-bit accum/memory               RTL               ENDCursorData     DATAXLoc           dc I2'0'YLoc           dc I2'0'               ENDLifeEdit       START               using CursorData               using Buffers               LONGA OFF               stz XLoc               stz YLocDoIt           lda #$7F        ;inverse               jsr DoCursorGetKey         lda KEYBOARD               bpl GetKey               sta KEYSTROBE               cmp #11+128               beq Up               cmp #10+128               beq Down               cmp #8+128               beq Left               cmp #21+128               beq Right               cmp #13+128               beq Flip               cmp #"A"+128               beq Go               cmp #"Q"+128               bne GetKey               rtsUp             lda YLoc               beq GetKey               lda #$FF               jsr DoCursor               dec YLoc               bra DoItDown           lda YLoc               cmp #22               beq GetKey               lda #$FF               jsr DoCursor               inc YLoc               bra DoItLeft           lda XLoc               beq GetKey               lda #$FF               jsr DoCursor               dec XLoc               bra DoItRight          lda XLoc               cmp #79               beq GetKey               lda #$FF               jsr DoCursor               inc XLoc               bra DoItFlip           jsr CalcPos               lda StatBuf,x               eor #1          ;flip it!               sta StatBuf,x               jmp DoItGo             lda #$FF               jsr DoCursor               jsr LifeRun               jmp DoIt               END               msb onDoCursor       START               using CursorData               using Buffers               sta Mask        ; turn it on or off?               lda XLoc        ; transfer this               ina               sta CH               lda YLoc               ina               sta VC               jsr VTAB               jsr CalcPos               ldy #" "               lda StatBuf,x   ; see what's there.               beq Curs1               ldy #"*"Curs1          tya               and Mask        ; do it to it               jsr STORCHAR    ; show the cursor, basically.               rtsMask           dc I1'0'        ; har har.               ENDCalcPos        START               using CursorData               LONGA ON               php               rep #$20        ; turn on 16-bit accum.               lda #0               ldy YLoc               inyIter           cpy #0               beq DoneWithY               dey               clc               adc #82               bra Iter        ; go again.DoneWithY      sec               adc XLoc               tax               LONGA OFF               plp               rts               ENDFixScreen      START               using CursorData               using Buffers               php               LONGA ON               rep #$20               lda #0               sta VC               sta CH               ldx #83         ; first position to look at (1,1)NextLine       anopNextChar       anop            ; ldy #$FFFF               lda StatBuf,x               and #$00FF*              beq Ok*              ldy #$0F00*Ok             tya               jsr PlotDot               inc CH               inx               lda CH               cmp #80               bcc NextChar               lda #0               sta CH               inx               inx               inc VC               lda VC               cmp #44               bcc NextLine               plp               rts               END